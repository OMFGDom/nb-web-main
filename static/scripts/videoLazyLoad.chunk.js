class e{observer=null;lazyIframes=null;constructor(){this.init()}init(){"IntersectionObserver"in window?(this.lazyIframes=document.querySelectorAll("iframe.lazy"),0!==this.lazyIframes.length&&(this.observer=new IntersectionObserver(this.handleIntersection.bind(this),{rootMargin:"100px 0px",threshold:.1}),this.lazyIframes.forEach(e=>{this.observer?.observe(e)}))):this.loadAllIframes()}handleIntersection(e){e.forEach(e=>{if(e.isIntersecting){const s=e.target;this.loadIframe(s),this.observer?.unobserve(s)}})}loadIframe(e){try{"IFRAME"===e.tagName&&this.loadIframeElement(e),e.classList.remove("lazy"),e.classList.add("loaded"),this.hidePlaceholder(e);const s=new CustomEvent("lazyIframeLoaded",{detail:{element:e}});document.dispatchEvent(s)}catch(s){e.classList.remove("lazy"),e.classList.add("error")}}loadIframeElement(e){const s=e.dataset.src;s&&(e.src=s,delete e.dataset.src)}hidePlaceholder(e){const s=e.closest(".video-hero__media");if(s){const e=s.querySelector(".video-placeholder"),t=s.querySelector(".video-hero__play");e&&e.classList.add("hidden"),t&&t.classList.add("hidden")}}loadAllIframes(){document.querySelectorAll("iframe.lazy").forEach(e=>{this.loadIframe(e)})}loadIframeManually(e){e.classList.contains("lazy")&&(this.loadIframe(e),this.observer?.unobserve(e))}refresh(){this.observer&&this.observer.disconnect(),this.init()}destroy(){this.observer&&(this.observer.disconnect(),this.observer=null),this.lazyIframes=null}}let s;function t(){s=new e,window.lazyIframeLoader=s}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",t):t();export{e as LazyIframeLoader};
