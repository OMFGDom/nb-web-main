{% extends "base.html" %}
{% block meta_data %}
    <title>Редакция | nationalbusiness.kz</title>
    <link rel="canonical" href="{{ (SITE_URL or 'https://nationalbusiness.kz') }}/authors/"/>

    {# — Description и keywords — #}
    <meta name="description" content="Знакомьтесь: авторы и редакция nationalbusiness.kz." />
    <meta name="keywords" content="авторы, редакция, nationalbusiness.kz" />
    <meta name="author" content="Редакция nationalbusiness.kz" />

    {# — Open Graph — #}
    <meta property="og:type"        content="website" />
    <meta property="og:title"       content="Редакция | nationalbusiness.kz" />
    <meta property="og:description" content="Знакомьтесь: авторы и редакция nationalbusiness.kz." />
    <meta property="og:url"         content="{{ (SITE_URL or 'https://nationalbusiness.kz') }}/authors/" />
    <meta property="og:image"       content="{{ (SITE_URL or 'https://nationalbusiness.kz') }}/static/img/plug.jpg" />

    {# — Twitter Card — #}
    <meta name="twitter:card"        content="summary_large_image" />
    <meta name="twitter:title"       content="Редакция | nationalbusiness.kz" />
    <meta name="twitter:description" content="Знакомьтесь: авторы и редакция nationalbusiness.kz." />
    <meta name="twitter:image:src"   content="{{ (SITE_URL or 'https://nationalbusiness.kz') }}/static/img/plug.jpg" />

    {# — JSON-LD: CollectionPage со списком авторов — #}
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "CollectionPage",
      "name": "Редакция",
      "description": "Знакомьтесь: авторы и редакция nationalbusiness.kz.",
      "url": "{{ (SITE_URL or 'https://nationalbusiness.kz') }}/authors/",
      "mainEntity": {
        "@type": "ItemList",
        "itemListElement": [
          {% for author in authors %}
          {
            "@type": "ListItem",
            "position": {{ loop.index }},
            "url": "{{ (SITE_URL or 'https://nationalbusiness.kz') }}/authors/{{ author.id }}/",
            "name": "{{ author.firstName }} {{ author.lastName }}"
          }{{ "," if not loop.last else "" }}
          {% endfor %}
        ]
      }
    }
    </script>

    {# — JSON-LD: BreadcrumbList — #}
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement": [
        {
          "@type": "ListItem",
          "position": 1,
          "name": "Главная",
          "item": "{{ (SITE_URL or 'https://nationalbusiness.kz') }}/"
        },
        {
          "@type": "ListItem",
          "position": 2,
          "name": "Редакция",
          "item": "{{ (SITE_URL or 'https://nationalbusiness.kz') }}/authors/"
        }
      ]
    }
    </script>
{% endblock meta_data %}

{% block content %}
    {% include 'header.html' %}

<main class="default-layout desktop-margin-wide subcategory-page">
  <div class="content">
    <h1 class="subcategory-page-title">Редакция</h1>

    <div class="authors-list">
      {% for author in authors %}
        {% set image_webp_800 = author.image.image_webp_800
            | default(author.image.image_800_webp, true)
            | default('/static/img/plug.jpg', true) %}
        {% set image_jpeg_800 = author.image.image_jpeg_800
            | default(author.image.image_800_jpeg, true)
            | default('/static/img/plug.jpg', true) %}
        {% set author_fullname = (author.firstName ~ ' ' ~ author.lastName) | trim %}
        {% set alt_text = author.image.alt | default(author_fullname, true) %}

        <a href="{{ SITE_URL }}/authors/{{ author.id }}/"
           class="author-item">
          <div class="author-image">
            <picture>
              <source media="(max-width: 699px)" type="image/webp" data-srcset="{{ image_webp_800 }}" class="lazy" />
              <source media="(min-width: 700px)" type="image/webp" data-srcset="{{ image_webp_800 }}" class="lazy" />
              <img data-src="{{ image_jpeg_800 }}"
                   alt="{{ alt_text }}"
                   class="lazy"
                   loading="lazy"
                   width="400"
                   height="400"/>
            </picture>
          </div>

          <div class="author-info">
            <span class="name">{{ author_fullname }}</span>
            <span class="position">{{ author.position or '' }}</span>
          </div>
        </a>
      {% endfor %}
    </div>
  </div>
</main>

    {% include 'footer.html' %}
{% endblock content %}

{% block scripts %}
 <script type="module" crossorigin src="/static/scripts/main.js"></script>
{% endblock scripts %}
